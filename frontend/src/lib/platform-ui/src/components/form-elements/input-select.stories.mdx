import { html } from 'lit-html'
import dedent from 'ts-dedent'
import { Meta, Story, Canvas, Source } from '@storybook/addon-docs/blocks'

import './input-select'

<Meta title="Form Elements/Input Select" component="sp-input-select" />

# Input Select

Use `sp-input-select` for selecting from lists of enumerated values. Value is set via the `value` attribute. Placeholder, via the `placeholder` attribute, readonly via the `readonly`attribute. Options need to be defined in the main slot as `<sp-menu-item>` elements.

<Canvas>
  <Story name="Default">
    $
    {html`
      <sp-input-select>
        <sp-menu-item value="option-1">Option 1</sp-menu-item>
        <sp-menu-item value="option-2">Option 2</sp-menu-item>
        <sp-menu-item value="option-3">I've got <i>rich</i> text in my <b>label</b></sp-menu-item>
        <sp-menu-item value="option-4">i am a longer option that spans across multiple lines</sp-menu-item>
        <sp-menu-item value="option-5" disabled>disabled</sp-menu-item>
      </sp-input-select>
    `}
  </Story>
  <Story name="Populated">
    $
    {html`
      <sp-input-select value="option-1">
        <sp-menu-item value="option-1">Option 1</sp-menu-item>
        <sp-menu-item value="option-2">Option 2</sp-menu-item>
        <sp-menu-item value="option-3">I've got <i>rich</i> text in my <b>label</b></sp-menu-item>
        <sp-menu-item value="option-4">i am a longer option that spans across multiple lines</sp-menu-item>
        <sp-menu-item value="option-5" disabled>disabled</sp-menu-item>
      </sp-input-select>
    `}
  </Story>
  <Story name="Placeholder">
    $
    {html`
      <sp-input-select placeholder="select an option..">
        <sp-menu-item value="option-1">Option 1</sp-menu-item>
        <sp-menu-item value="option-2">Option 2</sp-menu-item>
        <sp-menu-item value="option-3">I've got <i>rich</i> text in my <b>label</b></sp-menu-item>
        <sp-menu-item value="option-4">i am a longer option that spans across multiple lines</sp-menu-item>
        <sp-menu-item value="option-5" disabled>disabled</sp-menu-item>
      </sp-input-select>
    `}
  </Story>
  <Story name="Readonly empty">
    $
    {html`
      <sp-input-select readonly>
        <sp-menu-item value="option-1">aaaa</sp-menu-item>
        <sp-menu-item value="option-2">bbbb</sp-menu-item>
        <sp-menu-item value="option-3">I've got <i>rich</i> text in my <b>label</b></sp-menu-item>
        <sp-menu-item value="option-4">i am a longer option that spans across multiple lines</sp-menu-item>
        <sp-menu-item value="option-5" disabled>disabled</sp-menu-item>
      </sp-input-select>
    `}
  </Story>
  <Story name="Readonly with value">
    $
    {html`
      <sp-input-select readonly value="option-1">
        <sp-menu-item value="option-1">Option 1</sp-menu-item>
        <sp-menu-item value="option-2">Option 2</sp-menu-item>
        <sp-menu-item value="option-3">I've got <i>rich</i> text in my <b>label</b></sp-menu-item>
        <sp-menu-item value="option-4">i am a longer option that spans across multiple lines</sp-menu-item>
        <sp-menu-item value="option-5" disabled>disabled</sp-menu-item>
      </sp-input-select>
    `}
  </Story>
</Canvas>

## Labels

Labels are added via the `label` slot. Labels can be positioned above, or to the side using the `label-position` (`top`, `side`) attribute.

<Canvas>
  <Story name="Labeled">
    $
    {html`
      <sp-input-select>
        <sp-menu-item value="option-1">aaaa</sp-menu-item>
        <sp-menu-item value="option-2">bbbb</sp-menu-item>
        <sp-menu-item value="option-3">I've got <i>rich</i> text in my <b>label</b></sp-menu-item>
        <sp-menu-item value="option-4" disabled>disabled</sp-menu-item>
        <div slot="label">Labeled field</div>
      </sp-input-select>
    `}
  </Story>
</Canvas>

<Canvas>
  <Story name="Labeled: Side">
    $
    {html`
      <sp-input-select label-position="side">
        <sp-menu-item value="option-1">aaaa</sp-menu-item>
        <sp-menu-item value="option-2">bbbb</sp-menu-item>
        <sp-menu-item value="option-3">I've got <i>rich</i> text in my <b>label</b></sp-menu-item>
        <sp-menu-item value="option-4" disabled>disabled</sp-menu-item>
        <div slot="label">Labeled field</div>
      </sp-input-select>
    `}
  </Story>
</Canvas>

## Errors

Error state is achieved with the `invalid` attribute and the `error` slot.

<Canvas>
  <Story name="Error">
    $
    {html`
      <sp-input-select invalid>
        <sp-menu-item value="option-1">aaaa</sp-menu-item>
        <sp-menu-item value="option-2">bbbb</sp-menu-item>
        <sp-menu-item value="option-3">I've got <i>rich</i> text in my <b>label</b></sp-menu-item>
        <sp-menu-item value="option-4" disabled>disabled</sp-menu-item>
        <div slot="error">Error</div>
      </sp-input-select>
    `}
  </Story>
</Canvas>

## Sizes

The select input suports 5 different sizes, via the `size` attribute. (`x-small`, `small`, `medium`, `large` and `x-large`)

<Canvas>
  <Story name="Size: x-small">
    $
    {html`
      <sp-input-select size="x-small">
        <sp-menu-item value="option-1">aaaa</sp-menu-item>
        <sp-menu-item value="option-2">bbbb</sp-menu-item>
        <sp-menu-item value="option-3">I've got <i>rich</i> text in my <b>label</b></sp-menu-item>
        <sp-menu-item value="option-4">i am a longer option that spans across multiple lines</sp-menu-item>
        <sp-menu-item value="option-5" disabled>disabled</sp-menu-item>
      </sp-input-select>
    `}
  </Story>
  <Story name="Size: small">
    $
    {html`
      <sp-input-select size="small">
        <sp-menu-item value="option-1">aaaa</sp-menu-item>
        <sp-menu-item value="option-2">bbbb</sp-menu-item>
        <sp-menu-item value="option-3">I've got <i>rich</i> text in my <b>label</b></sp-menu-item>
        <sp-menu-item value="option-4">i am a longer option that spans across multiple lines</sp-menu-item>
        <sp-menu-item value="option-5" disabled>disabled</sp-menu-item>
      </sp-input-select>
    `}
  </Story>
  <Story name="Size: medium">
    $
    {html`
      <sp-input-select size="medium">
        <sp-menu-item value="option-1">aaaa</sp-menu-item>
        <sp-menu-item value="option-2">bbbb</sp-menu-item>
        <sp-menu-item value="option-3">I've got <i>rich</i> text in my <b>label</b></sp-menu-item>
        <sp-menu-item value="option-4">i am a longer option that spans across multiple lines</sp-menu-item>
        <sp-menu-item value="option-5" disabled>disabled</sp-menu-item>
      </sp-input-select>
    `}
  </Story>
  <Story name="Size: large">
    $
    {html`
      <sp-input-select size="large">
        <sp-menu-item value="option-1">aaaa</sp-menu-item>
        <sp-menu-item value="option-2">bbbb</sp-menu-item>
        <sp-menu-item value="option-3">I've got <i>rich</i> text in my <b>label</b></sp-menu-item>
        <sp-menu-item value="option-4">i am a longer option that spans across multiple lines</sp-menu-item>
        <sp-menu-item value="option-5" disabled>disabled</sp-menu-item>
      </sp-input-select>
    `}
  </Story>
  <Story name="Size: x-large">
    $
    {html`
      <sp-input-select size="x-large">
        <sp-menu-item value="option-1">aaaa</sp-menu-item>
        <sp-menu-item value="option-2">bbbb</sp-menu-item>
        <sp-menu-item value="option-3">I've got <i>rich</i> text in my <b>label</b></sp-menu-item>
        <sp-menu-item value="option-4">i am a longer option that spans across multiple lines</sp-menu-item>
        <sp-menu-item value="option-5" disabled>disabled</sp-menu-item>
      </sp-input-select>
    `}
  </Story>
</Canvas>

## Data-driven Options

Sometimes it's more convenient to supply a data list and have the component handle layout automatically, especially with large datasets.

The `options` prop accepts an array of data to populate the list. This <b>cannot be used alongside the default slot</b>. Named slots for labels and errors work as normal.

Each option must be an object containing a `label` and `value`. Currently these are restricted to `string` type only.

<Canvas>
  <Story name="Data-driven">
    $
    {html`
      <sp-input-select
        .options=${[
          { label: 'Option 1', value: 'option-1' },
          { label: 'Option 2', value: 'option-2' },
          { label: 'Option 3', value: 'option-3' },
          { label: 'Option 4', value: 'option-4' },
          { label: 'Option 5', value: 'option-5' },
          { label: 'Option 6', value: 'option-6' },
          { label: 'Option 7', value: 'option-7' },
          { label: 'Option 8', value: 'option-8' },
          { label: 'Option 9', value: 'option-9' },
          { label: 'Option 10', value: 'option-10' }
        ]}
      >
        <div slot="label">Data-driven</div>
      </sp-input-select>
    `}
  </Story>
</Canvas>

## React

To consume the `InputSelect` component in a React app, import it from the `@skedulo/platform-ui-react` package and use it as you would a normal react component. Kebab cased properties will be mapped to camelcase. The `label` slot is reached via the `label` prop, and the `error` slot is reached via the `error` prop.

<Source
  language="tsx"
  code={dedent`
import { InputSelect, MenuItem } from '@skedulo/platform-ui-react'
  <InputSelect value="selectedValue">
    <MenuItem value="selectedValue">Option</MenuItem>
    <MenuItem disabled={true} value="otherThing">Other Option</MenuItem>
  </InputSelect>
`}
/>

## Roadmap

- üêõ: High volume lists perform poorly in chrome
- No search variant
- Configurable drawer widths
